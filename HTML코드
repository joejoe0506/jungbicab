<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tool Ttak - Smart Toolbox (4ìë¦¬ ì½”ë“œ Mock-Up)</title>
  <style>
    body {
      font-family: 'Noto Sans KR', sans-serif;
      background-color: #f4f6f9;
      text-align: center;
      margin: 0;
      padding: 40px;
    }
    h1 {
      color: #333;
      font-size: 2em;
      margin-bottom: 10px;
    }
    .status-container {
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
      margin-top: 40px;
    }
    .tool-card {
      background: white;
      border-radius: 15px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
      padding: 20px;
      width: 180px;
      transition: 0.3s;
    }
    .tool-card h2 {
      margin-bottom: 10px;
    }
    .status {
      font-size: 1.2em;
      font-weight: bold;
      color: #555;
      padding: 10px;
      border-radius: 10px;
    }
    .ok { background-color: #c6f6d5; color: #065f46; }
    .use { background-color: #dbeafe; color: #1e3a8a; }
    .complete { background-color: #e0f2fe; color: #075985; }
    .missing { background-color: #fecaca; color: #7f1d1d; animation: blink 1s infinite; }
    @keyframes blink { 50% { opacity: 0.5; } }
    footer {
      margin-top: 50px;
      color: #777;
      font-size: 0.9em;
    }
    #inputSection {
      margin-top: 20px;
    }
    input {
      padding: 8px 12px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 120px;
      text-align: center;
    }
    .input-btn {
      margin-left: 10px;
      background: #0078ff;
      color: white;
      border: none;
      border-radius: 10px;
      padding: 8px 16px;
      font-size: 16px;
      cursor: pointer;
    }
    .input-btn:hover { background: #005fcc; }
    #modeInfo {
      margin-top: 10px;
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>ğŸ”§ Tool Ttak - ST-BOX (Mock-Up)</h1>
  <p>ESP8266 ì—†ì´ ì‹œë®¬ë ˆì´ì…˜ ì¤‘ì…ë‹ˆë‹¤.</p>

  <div id="inputSection">
    <input type="text" id="inputCode" maxlength="4" placeholder="ì˜ˆ: 1010">
    <button class="input-btn" onclick="applyCode()">ì ìš©</button>
  </div>

  <div id="modeInfo">í˜„ì¬ ìƒíƒœ: -</div>

  <div class="status-container" id="toolContainer"></div>

  <footer>Â© 2025 Tool Ttak | Capstone Design</footer>

  <script>
    const tools = [
      { id: 1, name: "ê³µêµ¬1" },
      { id: 2, name: "ê³µêµ¬2" },
      { id: 3, name: "ê³µêµ¬3" }
    ];
    const container = document.getElementById("toolContainer");

    // ì´ˆê¸° ì¹´ë“œ ìƒì„±
    tools.forEach(tool => {
      const div = document.createElement("div");
      div.className = "tool-card";
      div.innerHTML = `
        <h2>${tool.name}</h2>
        <div id="status-${tool.id}" class="status">ëŒ€ê¸° ì¤‘</div>
      `;
      container.appendChild(div);
    });

    function applyCode() {
      const code = document.getElementById("inputCode").value.trim();
      if (!/^[01]{4}$/.test(code)) {
        alert("4ìë¦¬ 0ê³¼ 1ë¡œë§Œ ì…ë ¥í•´ì£¼ì„¸ìš”! (ì˜ˆ: 1010)");
        return;
      }

      // ì• 3ìë¦¬ = ê³µêµ¬ ìƒíƒœ, ë§ˆì§€ë§‰ = ì‘ì—… ëª¨ë“œ
      const toolBits = code.slice(0, 3).split("").map(b => parseInt(b));
      const workBit = parseInt(code[3]); // 0=ì‘ì—…ì¤‘, 1=ì‘ì—…ì™„ë£Œ
      const modeInfo = document.getElementById("modeInfo");
      modeInfo.textContent = "í˜„ì¬ ìƒíƒœ: " + (workBit === 0 ? "ì‘ì—… ì¤‘" : "ì‘ì—… ì™„ë£Œ");

      tools.forEach((tool, i) => {
        const exists = toolBits[i] === 1;
        const statusEl = document.getElementById(`status-${tool.id}`);

        if (workBit === 0) { // ì‘ì—… ì¤‘
          if (exists) {
            statusEl.textContent = "âœ… ë°˜ë‚©ë¨ (ëŒ€ê¸°)";
            statusEl.className = "status ok";
          } else {
            statusEl.textContent = "ğŸ”§ ì‚¬ìš© ì¤‘";
            statusEl.className = "status use";
          }
        } else { // ì‘ì—… ì™„ë£Œ
          if (exists) {
            statusEl.textContent = "âœ”ï¸ ì‚¬ìš© ì™„ë£Œ (ì •ìƒ ë°˜ë‚©)";
            statusEl.className = "status complete";
          } else {
            statusEl.textContent = "âš ï¸ ë¶„ì‹¤ë¨! ê²½ë³´ ë°œìƒ";
            statusEl.className = "status missing";
            playAlert();
          }
        }
      });
    }

    // ê²½ë³´ìŒ í•¨ìˆ˜
    function playAlert() {
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioCtx.createOscillator();
      oscillator.type = 'square';
      oscillator.frequency.setValueAtTime(1000, audioCtx.currentTime);
      oscillator.connect(audioCtx.destination);
      oscillator.start();
      oscillator.stop(audioCtx.currentTime + 0.5);
    }
  </script>
</body>
</html>
